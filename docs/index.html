
<!DOCTYPE html>
<html>
    <select id="level1-chooser">
        <option value="global">Global</option>
        <option value="age">Age</option>
        <option value="nationality">Nationality</option>
    </select><br>
    <div id="container">
        <div id="controls"></div><br>
        <object id="map" type="text/html" data="global--.html" width="800" height="500"></object>
    </div>
   <script>

       function drawMap(filename) {
           document.getElementById('container').removeChild(document.getElementById('map'));
           let map = document.createElement('object');
           map.setAttribute('data', filename);
           map.setAttribute('id', 'map');
           map.setAttribute('type', 'text/html');
           map.setAttribute('width', 800);
           map.setAttribute('height', 500);
           document.getElementById('container').appendChild(map);
       }

       function age() {
           const slider = document.createElement('input');
           const ind = document.createElement('p');
           ind.innerText = "15-19";
           const changeAge = e => {
               drawMap("age--"+ e.target.value + ".html");
               ind.innerText = e.target.value + " - " + (parseInt(e.target.value) + 4);
           };
           changeAge({target: {value: 15}});
           slider.setAttribute('type', 'range');
           slider.setAttribute('min', 15);
           slider.setAttribute('max', 60);
           slider.setAttribute('step', 5);
           slider.setAttribute('value', "15");
           slider.addEventListener('change', changeAge)
           document.getElementById('controls').appendChild(ind);
           document.getElementById('controls').appendChild(slider);
       }

       function nationality() {
           const choices = ['foreign', 'swiss', 'unemployment_difference', 'unemployment_ratio'];
           const select = document.createElement('select')
           for (let c of choices) {
               const entry = document.createElement('option');
               entry.setAttribute('value', c);
               entry.innerText = c;
               select.appendChild(entry);
           }
           select.addEventListener('change', e => drawMap("nationality-" + e.target.value + "-.html"));
           document.getElementById('controls').appendChild(select);
       }

       function switchLevel1(e) {
           const level = e.target.value;
           document.getElementById('container').removeChild(document.getElementById('controls'));
           const ctrl = document.createElement('div');
           ctrl.setAttribute('id', 'controls');
           document.getElementById('container').appendChild(ctrl);
           const fs = {
               'global': () => drawMap('global--.html'),
               'age': age,
               'nationality': nationality
           };
           fs[level]()
      }

       document.getElementById('level1-chooser').addEventListener("change", switchLevel1)
   </script>

</html>